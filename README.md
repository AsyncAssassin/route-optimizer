# Вариант 1. Оптимизация маршрутов

## Описание проекта

Система оптимизации маршрутов для логистической компании. Программа находит оптимальные пути между городами по трём критериям:
- **Длина** (км) — кратчайший путь по расстоянию
- **Время** (мин) — быстрейший маршрут
- **Стоимость** (руб) — самый дешёвый путь

На основе заданных приоритетов система выбирает единственный компромиссный маршрут.

## Используемые алгоритмы и структуры данных

### Алгоритм Дейкстры
Для поиска кратчайших путей используется алгоритм Дейкстры с приоритетной очередью.

**Временная сложность:** O((V + E) · log V), где V — количество вершин, E — количество рёбер.

**Почему выбран:**
- Оптимален для графов с неотрицательными весами рёбер
- Гарантирует нахождение кратчайшего пути
- Эффективно работает с разреженными графами (дорожные сети)

### Оптимизация: один проход вместо трёх

Реализованы две версии алгоритма:

| Версия | Описание | Когда использовать |
|--------|----------|-------------------|
| `DijkstraPathFinder` | Три отдельных запуска для каждого критерия | Для единичных запросов по одному критерию |
| `OptimizedDijkstraPathFinder` | Один проход с параллельным отслеживанием всех критериев | Для поиска по всем критериям (используется по умолчанию) |

**Выигрыш от оптимизации:**
- Однократное выделение памяти под структуры данных
- Уменьшение накладных расходов на создание объектов
- Ускорение в ~1.5-2x на практике (константа, асимптотика та же)

### Структуры данных

| Структура | Применение | Сложность операций |
|-----------|------------|-------------------|
| `HashMap<String, City>` | Быстрый доступ к городам по названию | O(1) в среднем |
| `ArrayList<Road>` (adjacency list) | Хранение графа дорог | O(1) добавление |
| `PriorityQueue<Node>` | Очередь с приоритетом для Дейкстры | O(log n) извлечение минимума |
| `HashMap<City, Integer>` | Хранение расстояний до вершин | O(1) доступ |

## Структура проекта

```
src/
├── model/
│   ├── City.java          # Модель города
│   ├── Road.java          # Модель дороги с тремя параметрами
│   ├── Route.java         # Маршрут (путь + суммарные параметры)
│   └── Criterion.java     # Перечисление критериев оптимизации
├── graph/
│   ├── Graph.java                    # Граф дорожной сети
│   ├── DijkstraPathFinder.java       # Базовая реализация Дейкстры
│   └── OptimizedDijkstraPathFinder.java  # Оптимизированная версия (один проход)
├── parser/
│   └── InputParser.java   # Парсер входного файла
├── solver/
│   └── RouteSolver.java   # Решатель задачи с выбором компромисса
├── writer/
│   └── OutputWriter.java  # Форматированный вывод результатов
├── test/
│   ├── TestRunner.java       # Запуск всех тестов
│   ├── DijkstraTest.java     # Тесты алгоритма
│   ├── CompromiseTest.java   # Тесты выбора компромисса
│   ├── ParserTest.java       # Тесты парсера
│   ├── IntegrationTest.java  # Интеграционные тесты
│   └── PerformanceTest.java  # Тест производительности
└── Main.java              # Точка входа
```

## Сборка и запуск

### Компиляция
```bash
javac -d out src/**/*.java
```

### Запуск
```bash
java -cp out Main
```

### Входные/выходные файлы
- Входные данные: `input.txt` (в корне проекта)
- Результат: `output.txt`

## Формат входных данных

```
[CITIES]
1: Москва
2: Санкт-Петербург

[ROADS]
1 - 2: 700, 480, 800

[REQUESTS]
Москва -> Санкт-Петербург | (Д,В,С)
```

## Пример работы

**Входные данные:**
```
[CITIES]
1: Москва
2: Санкт-Петербург
3: Нижний Новгород

[ROADS]
1 - 2: 700, 480, 800
1 - 3: 400, 250, 300

[REQUESTS]
Москва -> Санкт-Петербург | (Д,В,С)
```

**Результат:**
```
ДЛИНА: Москва -> Санкт-Петербург | Д=700, В=480, С=800
ВРЕМЯ: Москва -> Санкт-Петербург | Д=700, В=480, С=800
СТОИМОСТЬ: Москва -> Санкт-Петербург | Д=700, В=480, С=800
КОМПРОМИСС: Москва -> Санкт-Петербург | Д=700, В=480, С=800
```

## Тестирование

Проект включает комплексный набор тестов:

### Запуск всех тестов
```bash
# Компиляция с тестами
javac -d out src/model/*.java src/graph/*.java src/parser/*.java src/solver/*.java src/writer/*.java src/test/*.java

# Запуск всех тестов
java -cp out test.TestRunner
```

### Структура тестов

| Тестовый класс | Описание |
|---------------|----------|
| `DijkstraTest` | Тесты алгоритма Дейкстры: прямые пути, разные критерии, отсутствие пути, циклы |
| `CompromiseTest` | Тесты выбора компромиссного маршрута: приоритеты, ничьи, разрешение конфликтов |
| `ParserTest` | Тесты парсера: валидный ввод, города с пробелами, ошибки формата |
| `IntegrationTest` | Интеграционные тесты: полный цикл работы программы |
| `PerformanceTest` | Сравнение производительности обычной и оптимизированной версий |

### Запуск отдельных тестов
```bash
java -cp out test.DijkstraTest
java -cp out test.CompromiseTest
java -cp out test.ParserTest
java -cp out test.IntegrationTest
java -cp out test.PerformanceTest
```

### Расширенный тестовый файл

Для проверки на сложных данных используйте `input_extended.txt`:
```bash
cp input_extended.txt input.txt
java -cp out Main
```

## Автор

Выполнено в рамках итогового задания по дисциплине "Алгоритмы и структуры данных"
